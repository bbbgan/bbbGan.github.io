<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="468px" preserveAspectRatio="none" style="width:677px;height:468px;background:#FFFFFF;" version="1.1" viewBox="0 0 677 468" width="677px" zoomAndPan="magnify"><defs/><g><!--MD5=[7128b0f21a8be2dbb334d2a4e9bf37c9]
class TcpServer--><g id="elem_TcpServer"><rect codeLine="2" fill="#F1F1F1" height="105.3604" id="TcpServer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="246.5" y="7"/><ellipse cx="273.65" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M272.2281,28.3594 Q270.3688,28.3594 269.275,26.9688 Q268.1813,25.5781 268.1813,22.5938 Q268.1813,20.0625 269.3453,18.4063 Q270.5094,16.75 272.4938,16.75 Q273.9625,16.75 274.4313,16.875 Q274.9,17.0781 274.9,17.0781 Q274.9,17.0781 274.9,17.0078 Q274.9,16.9375 275.5094,16.0156 L276.5563,19.6719 L275.2281,20.0781 Q274.7594,18.5313 274.0953,17.8672 Q273.4313,17.2031 272.3688,17.2031 Q271.9781,17.2031 271.2125,18.7344 Q270.4469,20.2656 270.4469,22.5156 Q270.4469,24.9844 271.1109,26.375 Q271.775,27.7656 272.3063,27.7656 Q273.3688,27.7656 274.1266,27 Q274.8844,26.2344 275.2281,24.5781 L276.5563,25.1719 Q276.2281,26.5781 275.3297,27.4688 Q274.4313,28.3594 272.2281,28.3594 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="290.35" y="29.4839">TcpServer</text><line style="stroke:#181818;stroke-width:0.5;" x1="247.5" x2="370.5" y1="39" y2="39"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="254.5" y="51.0601"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="266.5" y="59.0439">acceptor_</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="254.5" y="70.1802"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="266.5" y="78.1641">threadPool_</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="254.5" y="89.3003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="266.5" y="97.2842">ConnectionMap</text><line style="stroke:#181818;stroke-width:0.5;" x1="247.5" x2="370.5" y1="104.3604" y2="104.3604"/></g><!--MD5=[eacfc284bcf5d2e0685c442a64ec3923]
class EventLoopThreadPool--><g id="elem_EventLoopThreadPool"><rect codeLine="7" fill="#F1F1F1" height="67.1201" id="EventLoopThreadPool" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="174" x="7" y="200.5"/><ellipse cx="22" cy="216.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M20.5781,221.8594 Q18.7188,221.8594 17.625,220.4688 Q16.5313,219.0781 16.5313,216.0938 Q16.5313,213.5625 17.6953,211.9063 Q18.8594,210.25 20.8438,210.25 Q22.3125,210.25 22.7813,210.375 Q23.25,210.5781 23.25,210.5781 Q23.25,210.5781 23.25,210.5078 Q23.25,210.4375 23.8594,209.5156 L24.9063,213.1719 L23.5781,213.5781 Q23.1094,212.0313 22.4453,211.3672 Q21.7813,210.7031 20.7188,210.7031 Q20.3281,210.7031 19.5625,212.2344 Q18.7969,213.7656 18.7969,216.0156 Q18.7969,218.4844 19.4609,219.875 Q20.125,221.2656 20.6563,221.2656 Q21.7188,221.2656 22.4766,220.5 Q23.2344,219.7344 23.5781,218.0781 L24.9063,218.6719 Q24.5781,220.0781 23.6797,220.9688 Q22.7813,221.8594 20.5781,221.8594 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="36" y="222.9839">EventLoopThreadPool</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="180" y1="232.5" y2="232.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="244.5601"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="27" y="252.5439">loops_</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="180" y1="259.6201" y2="259.6201"/></g><!--MD5=[be3764bc3a6360dc48bb20f2ffb44695]
class Acceptor--><g id="elem_Acceptor"><rect codeLine="10" fill="#F1F1F1" height="105.3604" id="Acceptor" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="185" x="216.5" y="181.5"/><ellipse cx="276.75" cy="197.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M275.3281,202.8594 Q273.4688,202.8594 272.375,201.4688 Q271.2813,200.0781 271.2813,197.0938 Q271.2813,194.5625 272.4453,192.9063 Q273.6094,191.25 275.5938,191.25 Q277.0625,191.25 277.5313,191.375 Q278,191.5781 278,191.5781 Q278,191.5781 278,191.5078 Q278,191.4375 278.6094,190.5156 L279.6563,194.1719 L278.3281,194.5781 Q277.8594,193.0313 277.1953,192.3672 Q276.5313,191.7031 275.4688,191.7031 Q275.0781,191.7031 274.3125,193.2344 Q273.5469,194.7656 273.5469,197.0156 Q273.5469,199.4844 274.2109,200.875 Q274.875,202.2656 275.4063,202.2656 Q276.4688,202.2656 277.2266,201.5 Q277.9844,200.7344 278.3281,199.0781 L279.6563,199.6719 Q279.3281,201.0781 278.4297,201.9688 Q277.5313,202.8594 275.3281,202.8594 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="297.25" y="203.9839">Acceptor</text><line style="stroke:#181818;stroke-width:0.5;" x1="217.5" x2="400.5" y1="213.5" y2="213.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="224.5" y="225.5601"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="236.5" y="233.5439">acceptSocket_</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="224.5" y="244.6802"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="236.5" y="252.6641">acceptChannel_</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="224.5" y="263.8003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="236.5" y="271.7842">newConnectionCallback_</text><line style="stroke:#181818;stroke-width:0.5;" x1="217.5" x2="400.5" y1="278.8604" y2="278.8604"/></g><!--MD5=[5a90f1d8d8d37e8476121943fc156cea]
class TcpConnection--><g id="elem_TcpConnection"><rect codeLine="15" fill="#F1F1F1" height="124.4805" id="TcpConnection" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="437" y="172"/><ellipse cx="452" cy="188" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M450.5781,193.3594 Q448.7188,193.3594 447.625,191.9688 Q446.5313,190.5781 446.5313,187.5938 Q446.5313,185.0625 447.6953,183.4063 Q448.8594,181.75 450.8438,181.75 Q452.3125,181.75 452.7813,181.875 Q453.25,182.0781 453.25,182.0781 Q453.25,182.0781 453.25,182.0078 Q453.25,181.9375 453.8594,181.0156 L454.9063,184.6719 L453.5781,185.0781 Q453.1094,183.5313 452.4453,182.8672 Q451.7813,182.2031 450.7188,182.2031 Q450.3281,182.2031 449.5625,183.7344 Q448.7969,185.2656 448.7969,187.5156 Q448.7969,189.9844 449.4609,191.375 Q450.125,192.7656 450.6563,192.7656 Q451.7188,192.7656 452.4766,192 Q453.2344,191.2344 453.5781,189.5781 L454.9063,190.1719 Q454.5781,191.5781 453.6797,192.4688 Q452.7813,193.3594 450.5781,193.3594 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="466" y="194.4839">TcpConnection</text><line style="stroke:#181818;stroke-width:0.5;" x1="438" x2="564" y1="204" y2="204"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="445" y="216.0601"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="457" y="224.0439">socket_</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="445" y="235.1802"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="457" y="243.1641">inputBuffer_</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="445" y="254.3003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="457" y="262.2842">outputBuffer_</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="445" y="273.4204"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="457" y="281.4043">XXXXCallback_</text><line style="stroke:#181818;stroke-width:0.5;" x1="438" x2="564" y1="288.4805" y2="288.4805"/></g><!--MD5=[5689ca287c7aea90fda97069f53aa21d]
class InetAddress--><g id="elem_InetAddress"><rect codeLine="21" fill="#F1F1F1" height="67.1201" id="InetAddress" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="144" x="382" y="375"/><ellipse cx="413.65" cy="391" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M412.2281,396.3594 Q410.3688,396.3594 409.275,394.9688 Q408.1813,393.5781 408.1813,390.5938 Q408.1813,388.0625 409.3453,386.4063 Q410.5094,384.75 412.4938,384.75 Q413.9625,384.75 414.4313,384.875 Q414.9,385.0781 414.9,385.0781 Q414.9,385.0781 414.9,385.0078 Q414.9,384.9375 415.5094,384.0156 L416.5563,387.6719 L415.2281,388.0781 Q414.7594,386.5313 414.0953,385.8672 Q413.4313,385.2031 412.3688,385.2031 Q411.9781,385.2031 411.2125,386.7344 Q410.4469,388.2656 410.4469,390.5156 Q410.4469,392.9844 411.1109,394.375 Q411.775,395.7656 412.3063,395.7656 Q413.3688,395.7656 414.1266,395 Q414.8844,394.2344 415.2281,392.5781 L416.5563,393.1719 Q416.2281,394.5781 415.3297,395.4688 Q414.4313,396.3594 412.2281,396.3594 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="431.35" y="397.4839">InetAddress</text><line style="stroke:#181818;stroke-width:0.5;" x1="383" x2="525" y1="407" y2="407"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="390" y="419.0601"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="402" y="427.0439">sockaddr_in addr_</text><line style="stroke:#181818;stroke-width:0.5;" x1="383" x2="525" y1="434.1201" y2="434.1201"/></g><!--MD5=[8f07f51d887e64eddc161f608ee0ddb0]
class Socket--><g id="elem_Socket"><rect codeLine="24" fill="#F1F1F1" height="67.1201" id="Socket" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="271.5" y="375"/><ellipse cx="286.5" cy="391" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M285.0781,396.3594 Q283.2188,396.3594 282.125,394.9688 Q281.0313,393.5781 281.0313,390.5938 Q281.0313,388.0625 282.1953,386.4063 Q283.3594,384.75 285.3438,384.75 Q286.8125,384.75 287.2813,384.875 Q287.75,385.0781 287.75,385.0781 Q287.75,385.0781 287.75,385.0078 Q287.75,384.9375 288.3594,384.0156 L289.4063,387.6719 L288.0781,388.0781 Q287.6094,386.5313 286.9453,385.8672 Q286.2813,385.2031 285.2188,385.2031 Q284.8281,385.2031 284.0625,386.7344 Q283.2969,388.2656 283.2969,390.5156 Q283.2969,392.9844 283.9609,394.375 Q284.625,395.7656 285.1563,395.7656 Q286.2188,395.7656 286.9766,395 Q287.7344,394.2344 288.0781,392.5781 L289.4063,393.1719 Q289.0781,394.5781 288.1797,395.4688 Q287.2813,396.3594 285.0781,396.3594 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="300.5" y="397.4839">Socket</text><line style="stroke:#181818;stroke-width:0.5;" x1="272.5" x2="345.5" y1="407" y2="407"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="279.5" y="419.0601"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="291.5" y="427.0439">sockfd_</text><line style="stroke:#181818;stroke-width:0.5;" x1="272.5" x2="345.5" y1="434.1201" y2="434.1201"/></g><!--MD5=[9e9737bed61a6b1d6b48b2052db5d4e5]
class Buffer--><g id="elem_Buffer"><rect codeLine="27" fill="#F1F1F1" height="105.3604" id="Buffer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="561.5" y="356"/><ellipse cx="594.05" cy="372" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M592.6281,377.3594 Q590.7688,377.3594 589.675,375.9688 Q588.5813,374.5781 588.5813,371.5938 Q588.5813,369.0625 589.7453,367.4063 Q590.9094,365.75 592.8938,365.75 Q594.3625,365.75 594.8313,365.875 Q595.3,366.0781 595.3,366.0781 Q595.3,366.0781 595.3,366.0078 Q595.3,365.9375 595.9094,365.0156 L596.9563,368.6719 L595.6281,369.0781 Q595.1594,367.5313 594.4953,366.8672 Q593.8313,366.2031 592.7688,366.2031 Q592.3781,366.2031 591.6125,367.7344 Q590.8469,369.2656 590.8469,371.5156 Q590.8469,373.9844 591.5109,375.375 Q592.175,376.7656 592.7063,376.7656 Q593.7688,376.7656 594.5266,376 Q595.2844,375.2344 595.6281,373.5781 L596.9563,374.1719 Q596.6281,375.5781 595.7297,376.4688 Q594.8313,377.3594 592.6281,377.3594 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="611.95" y="378.4839">Buffer</text><line style="stroke:#181818;stroke-width:0.5;" x1="562.5" x2="669.5" y1="388" y2="388"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="569.5" y="400.0601"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="581.5" y="408.0439">buffer_</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="569.5" y="419.1802"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="581.5" y="427.1641">readerIndex_</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="569.5" y="438.3003"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="581.5" y="446.2842">writerIndex_</text><line style="stroke:#181818;stroke-width:0.5;" x1="562.5" x2="669.5" y1="453.3604" y2="453.3604"/></g><!--MD5=[d29317afe63dab7fd01ce9800967f660]
reverse link TcpServer to TcpConnection--><g id="link_TcpServer_TcpConnection"><path codeLine="33" d="M376.17,120.84 C395.88,138.55 417.38,157.87 436.89,175.4 " fill="none" id="TcpServer-backto-TcpConnection" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="366.35,112.02,368.1362,119.0064,375.2722,120.0447,373.486,113.0583,366.35,112.02" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[bcd93e17bcfdbb16d3b79980758d4e1e]
reverse link TcpServer to Acceptor--><g id="link_TcpServer_Acceptor"><path codeLine="34" d="M309,125.4 C309,143.86 309,163.72 309,181.28 " fill="none" id="TcpServer-backto-Acceptor" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="309,112.26,305,118.26,309,124.26,313,118.26,309,112.26" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ba821113f6e1f196dabedbafa334e84b]
reverse link TcpServer to EventLoopThreadPool--><g id="link_TcpServer_EventLoopThreadPool"><path codeLine="35" d="M235.93,119.13 C202.14,146.24 163.28,177.42 134.77,200.29 " fill="none" id="TcpServer-backto-EventLoopThreadPool" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="246.24,110.86,239.0565,111.4909,236.876,118.3644,244.0595,117.7335,246.24,110.86" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[edaa42763bb0235a82902f2ac569d1bf]
reverse link TcpConnection to Buffer--><g id="link_TcpConnection_Buffer"><path codeLine="36" d="M549.28,307.42 C560.11,323.67 571.4,340.6 581.54,355.8 " fill="none" id="TcpConnection-backto-Buffer" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="541.87,296.3,541.8612,303.5111,548.5142,306.2927,548.523,299.0816,541.87,296.3" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ae70428d1a694204ab0d0d8c535efa36]
reverse link TcpConnection to Socket--><g id="link_TcpConnection_Socket"><path codeLine="37" d="M427.05,300.4 C406.87,318.35 385.04,337.87 365,356 C358.24,362.11 351.06,368.67 344.17,374.99 " fill="none" id="TcpConnection-backto-Socket" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="436.81,291.72,429.6685,292.7198,427.8447,299.6965,434.9862,298.6967,436.81,291.72" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[32a223269a5b74405fb52dcc09098029]
reverse link Acceptor to Socket--><g id="link_Acceptor_Socket"><path codeLine="38" d="M309,299.83 C309,325.4 309,353.65 309,374.8 " fill="none" id="Acceptor-backto-Socket" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="309,286.76,305,292.76,309,298.76,313,292.76,309,286.76" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[52f21668f75bc96bed44ef9192f26d05]
reverse link TcpConnection to InetAddress--><g id="link_TcpConnection_InetAddress"><path codeLine="39" d="M480.85,308.95 C474.57,332.01 467.96,356.28 462.87,374.96 " fill="none" id="TcpConnection-backto-InetAddress" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="484.3,296.3,478.8645,301.0387,481.1482,307.8787,486.5836,303.14,484.3,296.3" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[6dec58d0a4221a414d7710aae0407800]
reverse link Acceptor to InetAddress--><g id="link_Acceptor_InetAddress"><path codeLine="40" d="M361.14,297.03 C383.24,323.32 408.09,352.88 426.51,374.8 " fill="none" id="Acceptor-backto-InetAddress" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="352.5,286.76,353.2985,293.9268,360.2211,295.9461,359.4226,288.7794,352.5,286.76" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[9d66450de063968fdda0d53fdd95e120]
@startuml TcpServer

class TcpServer {
- acceptor_
- threadPool_
- ConnectionMap
}
class EventLoopThreadPool {
- loops_
}
class Acceptor {
- acceptSocket_
- acceptChannel_
- newConnectionCallback_
}
class TcpConnection {
- socket_
- inputBuffer_
- outputBuffer_
- XXXXCallback_
}
class InetAddress {
- sockaddr_in addr_
}
class Socket {
-  sockfd_
}
class Buffer {
- buffer_
- readerIndex_
- writerIndex_
}

TcpServer o- -TcpConnection
TcpServer *- -Acceptor
TcpServer *- -EventLoopThreadPool
TcpConnection *- -Buffer
TcpConnection *- - Socket
Acceptor *- - Socket
TcpConnection *- - InetAddress
Acceptor *- - InetAddress

@enduml

PlantUML version 1.2022.7(Tue Aug 23 01:01:30 CST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>